{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\frontend\\\\src\\\\components\\\\job_seeker\\\\EditProfile.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport Toast from 'react-native-toast-message';\nimport BottomTabNavigator from \"../job_seeker/BottomTabNavigator\";\nimport ContactOverlay from \"../job_seeker/ContactOverlay\";\nimport SettingsOverlay from \"../job_seeker/SettingsOverlay\";\nimport { baseUrl } from \"../../utils/constants\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport { Picker } from \"@react-native-community/picker\";\nimport _ from \"lodash\";\nimport { ScrollView } from \"react-native-gesture-handler\";\nimport ImageUploadOverlay from \"./ImageUploadOverlay\";\n\nvar EditProfile = function EditProfile(props) {\n  console.log(props.navigation.state);\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      routeName = _useState2[0],\n      setRouteName = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      modalVisible = _useState4[0],\n      setModalVisible = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      settingModalVisible = _useState6[0],\n      setSettingModalVisible = _useState6[1];\n\n  var _useState7 = useState({}),\n      _useState8 = _slicedToArray(_useState7, 2),\n      userData = _useState8[0],\n      setUserData = _useState8[1];\n\n  var _useState9 = useState({}),\n      _useState10 = _slicedToArray(_useState9, 2),\n      jobSeekerData = _useState10[0],\n      setJobSeekerData = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      imagePath = _useState12[0],\n      setImagePath = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      success = _useState14[0],\n      setSuccess = _useState14[1];\n\n  var world_cities = require(\"../../../assets/jsonContent/world_cities.json\");\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      cities = _useState16[0],\n      setCities = _useState16[1];\n\n  function switchToScreen(screen, params) {\n    props.navigation.navigate(screen, params);\n  }\n\n  useEffect(function () {\n    setRouteName(props.navigation.state.routeName);\n    setCities(world_cities.filter(function (city) {\n      return city.country === \"Canada\";\n    }).sort(function (a, b) {\n      return a.city > b.city ? 1 : -1;\n    }));\n\n    if (_.isEmpty(userData)) {\n      try {\n        AsyncStorage.getItem(\"userData\").then(function (user) {\n          setUserData(JSON.parse(user));\n        });\n      } catch (error) {\n        console.log(error.message);\n      }\n    }\n  }, []);\n  useEffect(function () {\n    console.log(\"called\");\n\n    if (userData.id) {\n      var api_url = baseUrl + (\"api/job-seeker/profile/\" + userData.id);\n      fetch(api_url, {\n        method: \"GET\",\n        mode: \"cors\",\n        cache: \"no-cache\",\n        credentials: \"same-origin\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        redirect: \"follow\",\n        referrerPolicy: \"no-referrer\"\n      }).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        if (response.success) {\n          setJobSeekerData(response.result);\n        } else {\n          throw new Error(response);\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, [userData]);\n\n  function handleInputChange(text, name) {\n    var jobSeeker = _objectSpread({}, jobSeekerData);\n\n    jobSeeker[name] = text;\n    setJobSeekerData(jobSeeker);\n  }\n\n  function setImageData(imageUri) {\n    setImagePath(imageUri);\n    jobSeekerData[\"image\"] = imageUri;\n    setJobSeekerData(jobSeekerData);\n    setModalVisible(false);\n  }\n\n  function updateProfile() {\n    var data = new FormData();\n\n    if (imagePath) {\n      data.append(\"image\", Platform.OS === \"android\" ? {\n        uri: imagePath\n      } : {\n        uri: imagePath.replace(\"file://\", \"\")\n      });\n    }\n\n    data.append(\"title\", jobSeekerData.title);\n    data.append(\"first_name\", jobSeekerData.first_name);\n    data.append(\"last_name\", jobSeekerData.last_name);\n    data.append(\"phone_number\", jobSeekerData.phone_number);\n    data.append(\"company_name\", jobSeekerData.company_name);\n    data.append(\"city\", jobSeekerData.city);\n    data.append(\"id\", jobSeekerData.id);\n    console.log(data);\n    fetch(baseUrl + \"api/job-seeker/profile/edit\", {\n      method: \"POST\",\n      mode: \"cors\",\n      cache: \"no-cache\",\n      credentials: \"same-origin\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"multipart/form-data\"\n      },\n      redirect: \"follow\",\n      referrerPolicy: \"no-referrer\",\n      body: data\n    }).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      if (!response.success) {\n        Toast.show({\n          type: 'error',\n          position: 'top',\n          text1: 'Error',\n          text2: 'Something went wrong.'\n        });\n        throw new Error(response);\n      } else {\n        setJobSeekerData(response.result);\n        Toast.show({\n          type: 'success',\n          position: 'top',\n          text1: 'Success',\n          text2: 'Profile updated successfully.'\n        });\n      }\n    }).catch(function (err) {\n      Toast.show({\n        type: 'error',\n        position: 'top',\n        text1: 'Error',\n        text2: 'Something went wrong.'\n      });\n      console.log(err);\n    });\n  }\n\n  var title = jobSeekerData.title,\n      first_name = jobSeekerData.first_name,\n      last_name = jobSeekerData.last_name,\n      phone_number = jobSeekerData.phone_number,\n      company_name = jobSeekerData.company_name,\n      city = jobSeekerData.city;\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.innerContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }, React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.imageContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableHighlight, {\n    style: styles.imagePlaceholder,\n    onPress: function onPress() {\n      return setModalVisible(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }, jobSeekerData.image ? React.createElement(Image, {\n    style: [styles.profileImage],\n    source: {\n      uri: jobSeekerData.image\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 19\n    }\n  }) : React.createElement(Image, {\n    source: {\n      uri: \"https://i.ya-webdesign.com/images/blank-profile-picture-png-8.png\"\n    },\n    style: styles.profileImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  }))), React.createElement(Text, {\n    style: styles.labelText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, \"Profile Picture\")), React.createElement(View, {\n    style: styles.rowContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.labelText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, \"Title\"), React.createElement(View, {\n    style: [styles.pickerStyle],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, React.createElement(Picker, {\n    selectedValue: jobSeekerData.title,\n    onValueChange: function onValueChange(itemValue, itemIndex) {\n      return handleInputChange(itemValue, \"title\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 15\n    }\n  }, React.createElement(Picker.Item, {\n    label: \"Mr.\",\n    value: \"Mr.\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"Ms.\",\n    value: \"Ms.\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }), React.createElement(Picker.Item, {\n    label: \"Mrs.\",\n    value: \"Mrs.\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  })))), React.createElement(View, {\n    style: styles.rowContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.labelText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }, \"First Name\"), React.createElement(TextInput, {\n    style: styles.inputStyle,\n    onChangeText: function onChangeText(text) {\n      return handleInputChange(text, \"first_name\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, jobSeekerData.first_name)), React.createElement(View, {\n    style: styles.rowContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.labelText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }, \"Last Name\"), React.createElement(TextInput, {\n    style: styles.inputStyle,\n    onChangeText: function onChangeText(text) {\n      return handleInputChange(text, \"last_name\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }\n  }, jobSeekerData.last_name)), React.createElement(View, {\n    style: styles.rowContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.labelText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, \"Contact\"), React.createElement(TextInput, {\n    style: styles.inputStyle,\n    keyboardType: \"numeric\",\n    onChangeText: function onChangeText(text) {\n      return handleInputChange(text, \"phone_number\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }\n  }, jobSeekerData.phone_number)), React.createElement(View, {\n    style: styles.rowContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.labelText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  }, \"Organization\"), React.createElement(TextInput, {\n    style: styles.inputStyle,\n    onChangeText: function onChangeText(text) {\n      return handleInputChange(text, \"company_name\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 13\n    }\n  }, jobSeekerData.company_name)), React.createElement(View, {\n    style: styles.rowContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.labelText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 13\n    }\n  }, \"City\"), React.createElement(View, {\n    style: [styles.pickerStyle],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 13\n    }\n  }, React.createElement(Picker, {\n    selectedValue: jobSeekerData.city,\n    onValueChange: function onValueChange(itemValue, itemIndex) {\n      return handleInputChange(itemValue, \"city\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 15\n    }\n  }, cities.map(function (city) {\n    return React.createElement(Picker.Item, {\n      key: city.id,\n      label: city.city,\n      value: city.city,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }\n    });\n  })))), React.createElement(View, {\n    style: styles.rowContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableHighlight, {\n    style: styles.updateBtn,\n    onPress: updateProfile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 15\n    }\n  }, \"Update Profile\"))))), React.createElement(Toast, {\n    ref: function ref(_ref) {\n      return Toast.setRef(_ref);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.bottomNavigation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }\n  }, React.createElement(BottomTabNavigator, {\n    routeName: routeName,\n    userData: userData,\n    setSettingModalVisible: setSettingModalVisible,\n    switchToScreen: switchToScreen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 9\n    }\n  })), React.createElement(ImageUploadOverlay, {\n    setImageData: setImageData,\n    modalVisible: modalVisible,\n    setModalVisible: setModalVisible,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }\n  }), React.createElement(SettingsOverlay, {\n    switchToScreen: switchToScreen,\n    settingModalVisible: settingModalVisible,\n    setSettingModalVisible: setSettingModalVisible,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }\n  }));\n};\n\nEditProfile[\"navigationOptions\"] = function (screenProps) {\n  return {\n    title: \"Edit Profile\"\n  };\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: \"column\",\n    flex: 1,\n    width: null,\n    height: null\n  },\n  innerContainer: {\n    flex: 9.2\n  },\n  bottomNavigation: {\n    flex: 0.8,\n    backgroundColor: \"#dddddd\",\n    shadowColor: \"#dddddd\",\n    shadowOffset: {\n      width: 0,\n      height: 4\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 4.65,\n    elevation: 8\n  },\n  rowContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginHorizontal: 20,\n    marginVertical: 10\n  },\n  labelText: {\n    flex: 1,\n    fontWeight: \"700\",\n    fontSize: 16\n  },\n  pickerStyle: {\n    flex: 2,\n    height: 50,\n    overflow: \"hidden\",\n    borderRadius: 5,\n    backgroundColor: \"#ffffff\",\n    shadowColor: \"#dddddd\",\n    shadowOffset: {\n      width: 0,\n      height: 4\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 4.65,\n    elevation: 4\n  },\n  inputStyle: {\n    flex: 2,\n    height: 50,\n    borderRadius: 5,\n    backgroundColor: \"#ffffff\",\n    paddingLeft: 10,\n    shadowColor: \"#dddddd\",\n    shadowOffset: {\n      width: 0,\n      height: 4\n    },\n    marginLeft: 6,\n    shadowOpacity: 0.3,\n    shadowRadius: 4.65,\n    elevation: 4\n  },\n  imageContainer: {\n    flexDirection: \"column\",\n    margin: 15,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  imagePlaceholder: {\n    backgroundColor: \"#ffffff\",\n    borderRadius: 100,\n    shadowColor: \"#dddddd\",\n    shadowOffset: {\n      width: 0,\n      height: 4\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 4.65,\n    elevation: 8\n  },\n  profileImage: {\n    height: 120,\n    width: 120,\n    borderRadius: 100,\n    alignSelf: \"center\"\n  },\n  loginText: {\n    color: \"black\",\n    fontSize: 30,\n    marginTop: 20,\n    marginLeft: 100\n  },\n  updateBtn: {\n    height: 50,\n    width: 180,\n    borderRadius: 25,\n    backgroundColor: \"#fb5b5a\",\n    shadowColor: \"#dddddd\",\n    shadowOffset: {\n      width: 0,\n      height: 4\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 4.65,\n    elevation: 8,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});\nexport default EditProfile;","map":{"version":3,"sources":["D:/frontend/src/components/job_seeker/EditProfile.js"],"names":["React","useState","useEffect","Toast","BottomTabNavigator","ContactOverlay","SettingsOverlay","baseUrl","AsyncStorage","Picker","_","ScrollView","ImageUploadOverlay","EditProfile","props","console","log","navigation","state","routeName","setRouteName","modalVisible","setModalVisible","settingModalVisible","setSettingModalVisible","userData","setUserData","jobSeekerData","setJobSeekerData","imagePath","setImagePath","success","setSuccess","world_cities","require","cities","setCities","switchToScreen","screen","params","navigate","filter","city","country","sort","a","b","isEmpty","getItem","then","user","JSON","parse","error","message","id","api_url","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","response","json","result","Error","catch","err","handleInputChange","text","name","jobSeeker","setImageData","imageUri","updateProfile","data","FormData","append","Platform","OS","uri","replace","title","first_name","last_name","phone_number","company_name","Accept","body","show","type","position","text1","text2","styles","container","innerContainer","imageContainer","imagePlaceholder","image","profileImage","labelText","rowContainer","pickerStyle","itemValue","itemIndex","inputStyle","map","updateBtn","ref","setRef","bottomNavigation","screenProps","StyleSheet","create","flexDirection","flex","width","height","backgroundColor","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","justifyContent","alignItems","marginHorizontal","marginVertical","fontWeight","fontSize","overflow","borderRadius","paddingLeft","marginLeft","margin","alignSelf","loginText","color","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  TextInput,\r\n  Image,\r\n  TouchableHighlight,\r\n} from \"react-native\";\r\nimport Toast from 'react-native-toast-message';\r\nimport BottomTabNavigator from \"../job_seeker/BottomTabNavigator\";\r\nimport ContactOverlay from \"../job_seeker/ContactOverlay\";\r\nimport SettingsOverlay from \"../job_seeker/SettingsOverlay\";\r\nimport { baseUrl } from \"../../utils/constants\";\r\nimport AsyncStorage from \"@react-native-community/async-storage\";\r\nimport { Picker } from \"@react-native-community/picker\";\r\nimport _ from \"lodash\";\r\nimport { ScrollView } from \"react-native-gesture-handler\";\r\nimport ImageUploadOverlay from \"./ImageUploadOverlay\";\r\n\r\nconst EditProfile = (props) => {\r\n  console.log(props.navigation.state);\r\n  const [routeName, setRouteName] = useState(null);\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [settingModalVisible, setSettingModalVisible] = useState(false);\r\n  const [userData, setUserData] = useState({});\r\n  const [jobSeekerData, setJobSeekerData] = useState({});\r\n  const [imagePath, setImagePath] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  const world_cities = require(\"../../../assets/jsonContent/world_cities.json\");\r\n  let [cities, setCities] = useState([]);\r\n\r\n  function switchToScreen(screen, params) {\r\n    props.navigation.navigate(screen, params);\r\n  }\r\n\r\n  useEffect(() => {\r\n    setRouteName(props.navigation.state.routeName);\r\n    setCities(\r\n      world_cities\r\n        .filter((city) => city.country === \"Canada\")\r\n        .sort((a, b) => (a.city > b.city ? 1 : -1))\r\n    );\r\n    if (_.isEmpty(userData)) {\r\n      try {\r\n        AsyncStorage.getItem(\"userData\").then((user) => {\r\n          setUserData(JSON.parse(user));\r\n        });\r\n      } catch (error) {\r\n        // Error retrieving data\r\n        console.log(error.message);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(\"called\");\r\n    if (userData.id) {\r\n      const api_url = baseUrl + `api/job-seeker/profile/${userData.id}`;\r\n      fetch(api_url, {\r\n        method: \"GET\",\r\n        mode: \"cors\", // no-cors, *cors, same-origin\r\n        cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\r\n        credentials: \"same-origin\", // include, *same-origin, omit\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          // 'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n        redirect: \"follow\", // manual, *follow, error\r\n        referrerPolicy: \"no-referrer\",\r\n      })\r\n        .then((response) => response.json())\r\n        .then((response) => {\r\n          if (response.success) {\r\n            // this.props.navigation.navigate('Login', {user_type:response.result.user_type})\r\n            setJobSeekerData(response.result);\r\n          } else {\r\n            throw new Error(response);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  }, [userData]);\r\n\r\n  function handleInputChange(text, name) {\r\n    const jobSeeker = { ...jobSeekerData };\r\n    jobSeeker[name] = text;\r\n    setJobSeekerData(jobSeeker);\r\n  }\r\n\r\n  function setImageData(imageUri) {\r\n    setImagePath(imageUri);\r\n    jobSeekerData[\"image\"] = imageUri;\r\n    setJobSeekerData(jobSeekerData);\r\n    setModalVisible(false);\r\n  }\r\n\r\n  function updateProfile() {\r\n    let data = new FormData();\r\n    if (imagePath) {\r\n      data.append(\r\n        \"image\",\r\n        Platform.OS === \"android\"\r\n          ? { uri: imagePath }\r\n          : { uri: imagePath.replace(\"file://\", \"\") }\r\n      );\r\n    }\r\n    data.append(\"title\", jobSeekerData.title);\r\n    data.append(\"first_name\", jobSeekerData.first_name);\r\n    data.append(\"last_name\", jobSeekerData.last_name);\r\n    data.append(\"phone_number\", jobSeekerData.phone_number);\r\n    data.append(\"company_name\", jobSeekerData.company_name);\r\n    data.append(\"city\", jobSeekerData.city);\r\n    data.append(\"id\", jobSeekerData.id);\r\n\r\n    console.log(data);\r\n\r\n    fetch(baseUrl + \"api/job-seeker/profile/edit\", {\r\n      method: \"POST\",\r\n      mode: \"cors\", // no-cors, *cors, same-origin\r\n      cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\r\n      credentials: \"same-origin\", // include, *same-origin, omit\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"multipart/form-data\",\r\n        // 'Content-Type': 'application/x-www-form-urlencoded',\r\n      },\r\n      redirect: \"follow\", // manual, *follow, error\r\n      referrerPolicy: \"no-referrer\",\r\n      body: data,\r\n    })\r\n      .then((response) => response.json())\r\n      .then((response) => {\r\n        if (!response.success) {\r\n          Toast.show({\r\n            type: 'error',\r\n            position: 'top',\r\n            text1: 'Error',\r\n            text2: 'Something went wrong.',\r\n          });\r\n          throw new Error(response);\r\n        } else {\r\n          setJobSeekerData(response.result);\r\n          Toast.show({\r\n            type: 'success',\r\n            position: 'top',\r\n            text1: 'Success',\r\n            text2: 'Profile updated successfully.',\r\n          });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        Toast.show({\r\n          type: 'error',\r\n          position: 'top',\r\n          text1: 'Error',\r\n          text2: 'Something went wrong.',\r\n        });\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  const {\r\n    title,\r\n    first_name,\r\n    last_name,\r\n    phone_number,\r\n    company_name,\r\n    city,\r\n  } = jobSeekerData;\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.innerContainer}>\r\n        <ScrollView>\r\n          <View style={styles.imageContainer}>\r\n            <TouchableHighlight\r\n              style={styles.imagePlaceholder}\r\n              onPress={() => setModalVisible(true)}\r\n            >\r\n              <View>\r\n                {jobSeekerData.image ? (\r\n                  <Image\r\n                    style={[styles.profileImage]}\r\n                    source={{ uri: jobSeekerData.image }}\r\n                  />\r\n                ) : (\r\n                    <Image\r\n                      source={{\r\n                        uri:\r\n                          \"https://i.ya-webdesign.com/images/blank-profile-picture-png-8.png\",\r\n                      }}\r\n                      style={styles.profileImage}\r\n                    />\r\n                  )}\r\n              </View>\r\n            </TouchableHighlight>\r\n            <Text style={styles.labelText}>Profile Picture</Text>\r\n          </View>\r\n          <View style={styles.rowContainer}>\r\n            <Text style={styles.labelText}>Title</Text>\r\n            <View style={[styles.pickerStyle]}>\r\n              <Picker\r\n                selectedValue={jobSeekerData.title}\r\n                onValueChange={(itemValue, itemIndex) =>\r\n                  handleInputChange(itemValue, \"title\")\r\n                }\r\n              >\r\n                <Picker.Item label=\"Mr.\" value=\"Mr.\" />\r\n                <Picker.Item label=\"Ms.\" value=\"Ms.\" />\r\n                <Picker.Item label=\"Mrs.\" value=\"Mrs.\" />\r\n              </Picker>\r\n            </View>\r\n          </View>\r\n          <View style={styles.rowContainer}>\r\n            <Text style={styles.labelText}>First Name</Text>\r\n            <TextInput\r\n              style={styles.inputStyle}\r\n              onChangeText={(text) => handleInputChange(text, \"first_name\")}\r\n            >\r\n              {jobSeekerData.first_name}\r\n            </TextInput>\r\n          </View>\r\n          <View style={styles.rowContainer}>\r\n            <Text style={styles.labelText}>Last Name</Text>\r\n            <TextInput\r\n              style={styles.inputStyle}\r\n              onChangeText={(text) => handleInputChange(text, \"last_name\")}\r\n            >\r\n              {jobSeekerData.last_name}\r\n            </TextInput>\r\n          </View>\r\n          <View style={styles.rowContainer}>\r\n            <Text style={styles.labelText}>Contact</Text>\r\n            <TextInput\r\n              style={styles.inputStyle}\r\n              keyboardType=\"numeric\"\r\n              onChangeText={(text) => handleInputChange(text, \"phone_number\")}\r\n            >\r\n              {jobSeekerData.phone_number}\r\n            </TextInput>\r\n          </View>\r\n          <View style={styles.rowContainer}>\r\n            <Text style={styles.labelText}>Organization</Text>\r\n            <TextInput\r\n              style={styles.inputStyle}\r\n              onChangeText={(text) => handleInputChange(text, \"company_name\")}\r\n            >\r\n              {jobSeekerData.company_name}\r\n            </TextInput>\r\n          </View>\r\n          <View style={styles.rowContainer}>\r\n            <Text style={styles.labelText}>City</Text>\r\n            <View style={[styles.pickerStyle]}>\r\n              <Picker\r\n                selectedValue={jobSeekerData.city}\r\n                onValueChange={(itemValue, itemIndex) =>\r\n                  handleInputChange(itemValue, \"city\")\r\n                }\r\n              >\r\n                {cities.map((city) => {\r\n                  return (\r\n                    <Picker.Item\r\n                      key={city.id}\r\n                      label={city.city}\r\n                      value={city.city}\r\n                    />\r\n                  );\r\n                })}\r\n              </Picker>\r\n            </View>\r\n          </View>\r\n          <View style={styles.rowContainer}>\r\n            <TouchableHighlight\r\n              style={styles.updateBtn}\r\n              onPress={updateProfile}\r\n            >\r\n              <Text>Update Profile</Text>\r\n            </TouchableHighlight>\r\n          </View>\r\n        </ScrollView>\r\n      </View>\r\n      <Toast ref={(ref) => Toast.setRef(ref)} />\r\n      <View style={styles.bottomNavigation}>\r\n        <BottomTabNavigator\r\n          routeName={routeName}\r\n          userData={userData}\r\n          setSettingModalVisible={setSettingModalVisible}\r\n          switchToScreen={switchToScreen}\r\n        />\r\n      </View>\r\n      <ImageUploadOverlay\r\n        setImageData={setImageData}\r\n        modalVisible={modalVisible}\r\n        setModalVisible={setModalVisible}\r\n      />\r\n      <SettingsOverlay\r\n        switchToScreen={switchToScreen}\r\n        settingModalVisible={settingModalVisible}\r\n        setSettingModalVisible={setSettingModalVisible}\r\n      />\r\n    </View>\r\n  );\r\n};\r\n\r\nEditProfile[\"navigationOptions\"] = (screenProps) => ({\r\n  title: \"Edit Profile\",\r\n});\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexDirection: \"column\",\r\n    flex: 1,\r\n    width: null,\r\n    height: null,\r\n  },\r\n  innerContainer: {\r\n    flex: 9.2,\r\n  },\r\n  bottomNavigation: {\r\n    flex: 0.8,\r\n    backgroundColor: \"#dddddd\",\r\n    shadowColor: \"#dddddd\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 4,\r\n    },\r\n    shadowOpacity: 0.3,\r\n    shadowRadius: 4.65,\r\n    elevation: 8,\r\n  },\r\n  rowContainer: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginHorizontal: 20,\r\n    marginVertical: 10,\r\n  },\r\n  labelText: {\r\n    flex: 1,\r\n    fontWeight: \"700\",\r\n    fontSize: 16,\r\n  },\r\n  pickerStyle: {\r\n    flex: 2,\r\n    height: 50,\r\n    overflow: \"hidden\",\r\n    borderRadius: 5,\r\n    backgroundColor: \"#ffffff\",\r\n    shadowColor: \"#dddddd\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 4,\r\n    },\r\n    shadowOpacity: 0.3,\r\n    shadowRadius: 4.65,\r\n    elevation: 4,\r\n  },\r\n  inputStyle: {\r\n    flex: 2,\r\n    height: 50,\r\n    borderRadius: 5,\r\n    backgroundColor: \"#ffffff\",\r\n    paddingLeft: 10,\r\n    shadowColor: \"#dddddd\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 4,\r\n    },\r\n    marginLeft: 6,\r\n    shadowOpacity: 0.3,\r\n    shadowRadius: 4.65,\r\n    elevation: 4,\r\n  },\r\n  imageContainer: {\r\n    flexDirection: \"column\",\r\n    margin: 15,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n  imagePlaceholder: {\r\n    backgroundColor: \"#ffffff\",\r\n    borderRadius: 100,\r\n    shadowColor: \"#dddddd\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 4,\r\n    },\r\n    shadowOpacity: 0.3,\r\n    shadowRadius: 4.65,\r\n    elevation: 8,\r\n  },\r\n  profileImage: {\r\n    height: 120,\r\n    width: 120,\r\n    borderRadius: 100,\r\n    alignSelf: \"center\",\r\n  },\r\n  loginText: {\r\n    color: \"black\",\r\n    fontSize: 30,\r\n    marginTop: 20,\r\n    marginLeft: 100,\r\n  },\r\n  updateBtn: {\r\n    height: 50,\r\n    width: 180,\r\n    borderRadius: 25,\r\n    backgroundColor: \"#fb5b5a\",\r\n    shadowColor: \"#dddddd\",\r\n    shadowOffset: {\r\n      width: 0,\r\n      height: 4,\r\n    },\r\n    shadowOpacity: 0.3,\r\n    shadowRadius: 4.65,\r\n    elevation: 8,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n});\r\n\r\nexport default EditProfile;\r\n"]},"metadata":{},"sourceType":"module"}