{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/rahulsharma/Desktop/Project/frontend/src/containers/HomeScreen.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport Toast from \"react-native-toast-message\";\nimport * as Facebook from \"expo-facebook\";\nimport { FontAwesome } from \"@expo/vector-icons\";\nimport { baseUrl } from \"../utils/constants\";\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#ffffff\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  inputView: {\n    width: \"70%\",\n    backgroundColor: \"#64358D\",\n    borderRadius: 25,\n    height: 50,\n    marginBottom: 20,\n    justifyContent: \"center\",\n    padding: 20\n  },\n  text: {\n    fontSize: 30\n  },\n  inputText: {\n    height: 50,\n    color: \"white\"\n  },\n  forgot: {\n    color: \"black\",\n    fontSize: 11\n  },\n  error: {\n    color: \"red\",\n    fontSize: 12,\n    marginTop: 20,\n    marginLeft: 35,\n    justifyContent: \"center\"\n  },\n  loginBtn: {\n    width: \"70%\",\n    backgroundColor: \"#8fbc8f\",\n    borderRadius: 25,\n    height: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginTop: 40,\n    marginBottom: 10\n  },\n  loginText: {\n    color: \"white\"\n  },\n  signupBtn: {\n    width: \"70%\",\n    backgroundColor: \"#fb5b5a\",\n    borderRadius: 25,\n    height: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginTop: 10,\n    marginBottom: 10\n  },\n  signupBtnText: {\n    color: \"white\"\n  },\n  fbBtn: {\n    width: \"70%\",\n    backgroundColor: \"#4267b2\",\n    borderRadius: 25,\n    height: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginTop: 10,\n    marginBottom: 10,\n    flexDirection: \"row\"\n  }\n});\n\nvar HomeScreen = function (_React$Component) {\n  _inherits(HomeScreen, _React$Component);\n\n  var _super = _createSuper(HomeScreen);\n\n  function HomeScreen(props) {\n    var _this;\n\n    _classCallCheck(this, HomeScreen);\n\n    _this = _super.call(this, props);\n\n    _this.handleEmailChange = function (event) {\n      _this.setState({\n        email: event\n      });\n    };\n\n    _this.handlePasswordChange = function (event) {\n      _this.setState({\n        password: event\n      });\n    };\n\n    _this.handleSubmit = function (event) {\n      _this.loginUser();\n    };\n\n    _this.loginUser = function () {\n      console.log(\"login uesr\");\n      fetch(baseUrl + \"api/login/check\", {\n        method: \"POST\",\n        mode: \"cors\",\n        cache: \"no-cache\",\n        credentials: \"same-origin\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        redirect: \"follow\",\n        referrerPolicy: \"no-referrer\",\n        body: JSON.stringify(_this.state)\n      }).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        if (response.success) {\n          _this.setState({\n            success: true\n          });\n\n          var _response$result = response.result,\n              user = _response$result.user,\n              login = _response$result.login;\n\n          if (login.type === \"EMPLOYER\") {\n            AsyncStorage.setItem(\"employerLoginData\", JSON.stringify({\n              user: user,\n              login: login\n            }));\n\n            _this.props.navigation.navigate(\"EmployerScreen\", response.result);\n          } else if (login.type === \"JOB_SEEKER\") {\n            AsyncStorage.setItem(\"jobSeekerLoginData\", JSON.stringify({\n              user: user,\n              login: login\n            }));\n\n            _this.props.navigation.navigate(\"JobSeekerScreen\", login);\n          } else {\n            Toast.show({\n              type: \"error\",\n              position: \"top\",\n              text1: \"Warning\",\n              text2: \"Something went wrong.\"\n            });\n          }\n        } else throw new Error(response);\n      }).catch(function (err) {\n        Toast.show({\n          type: \"error\",\n          position: \"top\",\n          text1: \"Warning\",\n          text2: \"Login Failed\"\n        });\n      });\n    };\n\n    _this.facebookLogIn = function _callee() {\n      var FB_APP_ID, _await$Facebook$logIn, type, token, expires, permissions, declinedPermissions, message;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              FB_APP_ID = \"320335242291060\";\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(Facebook.initializeAsync(FB_APP_ID));\n\n            case 4:\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(Facebook.logInWithReadPermissionsAsync(FB_APP_ID, {\n                permissions: [\"public_profile\"]\n              }));\n\n            case 6:\n              _await$Facebook$logIn = _context.sent;\n              type = _await$Facebook$logIn.type;\n              token = _await$Facebook$logIn.token;\n              expires = _await$Facebook$logIn.expires;\n              permissions = _await$Facebook$logIn.permissions;\n              declinedPermissions = _await$Facebook$logIn.declinedPermissions;\n              console.log({\n                type: type,\n                token: token,\n                expires: expires,\n                permissions: permissions,\n                declinedPermissions: declinedPermissions\n              });\n\n              if (type === \"success\") {\n                fetch(\"https://graph.facebook.com/me?access_token=\" + token + \"&fields=id,name,email,picture.height(500)\").then(function (response) {\n                  return response.json();\n                }).then(function (data) {\n                  _this.setState({\n                    isLoggedin: true,\n                    userFbData: data\n                  }, function () {\n                    console.log(_this.state.userFbData);\n\n                    _this.props.navigation.navigate(\"RegisterScr\", _this.state.userFbData);\n                  });\n                }).catch(function (e) {\n                  return console.log(e);\n                });\n              } else {}\n\n              _context.next = 20;\n              break;\n\n            case 16:\n              _context.prev = 16;\n              _context.t0 = _context[\"catch\"](0);\n              message = _context.t0.message;\n              alert(\"Facebook Login Error: \" + message);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 16]], Promise);\n    };\n\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      success: true,\n      routeName: null,\n      isLoggedin: false,\n      userFbData: null,\n      isImageLoading: false\n    };\n    return _this;\n  }\n\n  _createClass(HomeScreen, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }\n      }, React.createElement(Toast, {\n        ref: function ref(_ref2) {\n          return Toast.setRef(_ref2);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 17\n        }\n      }), React.createElement(View, {\n        style: styles.image,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 17\n        }\n      }, React.createElement(Image, {\n        source: require(\"../../assets/logo.png\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }\n      })), React.createElement(View, {\n        style: styles.inputView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 17\n        }\n      }, React.createElement(TextInput, {\n        name: \"email\",\n        type: \"text\",\n        style: styles.inputText,\n        placeholder: \"Email\",\n        placeholderTextColor: \"#dddddd\",\n        onChangeText: this.handleEmailChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 21\n        }\n      })), React.createElement(View, {\n        style: styles.inputView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 17\n        }\n      }, React.createElement(TextInput, {\n        name: \"password\",\n        type: \"text\",\n        secureTextEntry: true,\n        style: styles.inputText,\n        placeholder: \"Password\",\n        placeholderTextColor: \"#dddddd\",\n        onChangeText: this.handlePasswordChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate(\"ForgatPassword\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.forgot,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 21\n        }\n      }, \"Forgot Password?\")), React.createElement(TouchableOpacity, {\n        style: styles.loginBtn,\n        onPress: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.loginText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 21\n        }\n      }, \"LOGIN\")), React.createElement(TouchableOpacity, {\n        style: styles.signupBtn,\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate(\"RegisterScr\", {});\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 17\n        }\n      }, React.createElement(Text, {\n        style: styles.signupBtnText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 21\n        }\n      }, \"SIGN UP\")), React.createElement(TouchableOpacity, {\n        style: styles.fbBtn,\n        onPress: this.facebookLogIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 17\n        }\n      }, React.createElement(FontAwesome, {\n        name: \"facebook\",\n        color: \"#ffffff\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 21\n        }\n      }), React.createElement(Text, {\n        style: {\n          color: \"#ffffff\",\n          marginLeft: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 21\n        }\n      }, \"Signup with Facebook\")));\n    }\n  }]);\n\n  return HomeScreen;\n}(React.Component);\n\nexport default HomeScreen;","map":{"version":3,"sources":["/Users/rahulsharma/Desktop/Project/frontend/src/containers/HomeScreen.js"],"names":["React","AsyncStorage","Toast","Facebook","FontAwesome","baseUrl","styles","StyleSheet","create","container","flex","backgroundColor","alignItems","justifyContent","inputView","width","borderRadius","height","marginBottom","padding","text","fontSize","inputText","color","forgot","error","marginTop","marginLeft","loginBtn","loginText","signupBtn","signupBtnText","fbBtn","flexDirection","HomeScreen","props","handleEmailChange","event","setState","email","handlePasswordChange","password","handleSubmit","loginUser","console","log","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","state","then","response","json","success","result","user","login","type","setItem","navigation","navigate","show","position","text1","text2","Error","catch","err","facebookLogIn","FB_APP_ID","initializeAsync","logInWithReadPermissionsAsync","permissions","token","expires","declinedPermissions","data","isLoggedin","userFbData","e","message","alert","routeName","isImageLoading","ref","setRef","image","require","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n    StyleSheet,\n    Text,\n    View,\n    TextInput,\n    TouchableOpacity,\n    Image,\n} from \"react-native\";\n// import Toast from \"react-native-root-toast\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport Toast from \"react-native-toast-message\";\nimport * as Facebook from \"expo-facebook\";\nimport {FontAwesome} from \"@expo/vector-icons\";\n\nimport {baseUrl} from \"../utils/constants\";\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: \"#ffffff\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n    },\n    inputView: {\n        width: \"70%\",\n        backgroundColor: \"#64358D\",\n        borderRadius: 25,\n        height: 50,\n        marginBottom: 20,\n        justifyContent: \"center\",\n        padding: 20,\n    },\n    text: {\n        fontSize: 30,\n    },\n    inputText: {\n        height: 50,\n        color: \"white\",\n    },\n    forgot: {\n        color: \"black\",\n        fontSize: 11,\n    },\n    error: {\n        color: \"red\",\n        fontSize: 12,\n        marginTop: 20,\n        marginLeft: 35,\n        justifyContent: \"center\",\n    },\n    loginBtn: {\n        width: \"70%\",\n        backgroundColor: \"#8fbc8f\",\n        borderRadius: 25,\n        height: 50,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        marginTop: 40,\n        marginBottom: 10,\n    },\n    loginText: {\n        color: \"white\",\n    },\n    signupBtn: {\n        width: \"70%\",\n        backgroundColor: \"#fb5b5a\",\n        borderRadius: 25,\n        height: 50,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        marginTop: 10,\n        marginBottom: 10,\n    },\n    signupBtnText: {\n        color: \"white\",\n    },\n    fbBtn: {\n        width: \"70%\",\n        backgroundColor: \"#4267b2\",\n        borderRadius: 25,\n        height: 50,\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        marginTop: 10,\n        marginBottom: 10,\n        flexDirection: \"row\",\n    },\n});\n\nclass HomeScreen extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            email: \"\",\n            password: \"\",\n            success: true,\n            routeName: null,\n            isLoggedin: false,\n            userFbData: null,\n            isImageLoading: false,\n        };\n    }\n\n    handleEmailChange = (event) => {\n        this.setState({\n            email: event,\n        });\n    };\n    handlePasswordChange = (event) => {\n        this.setState({\n            password: event,\n        });\n    };\n    handleSubmit = (event) => {\n        this.loginUser();\n    };\n\n    loginUser = () => {\n        console.log(\"login uesr\");\n        fetch(baseUrl + \"api/login/check\", {\n            method: \"POST\",\n            mode: \"cors\", // no-cors, *cors, same-origin\n            cache: \"no-cache\", // *default, no-cache, reload, force-cache, only-if-cached\n            credentials: \"same-origin\", // include, *same-origin, omit\n            headers: {\n                \"Content-Type\": \"application/json\",\n                // 'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            redirect: \"follow\", // manual, *follow, error\n            referrerPolicy: \"no-referrer\",\n            body: JSON.stringify(this.state),\n        })\n            .then((response) => response.json())\n            .then((response) => {\n                if (response.success) {\n                    this.setState({success: true});\n                    const {user, login} = response.result;\n                    if (login.type === \"EMPLOYER\") {\n                        AsyncStorage.setItem(\n                            \"employerLoginData\",\n                            JSON.stringify({user, login})\n                        );\n                        this.props.navigation.navigate(\n                            \"EmployerScreen\",\n                            response.result\n                        );\n                    } else if (login.type === \"JOB_SEEKER\") {\n                        AsyncStorage.setItem(\n                            \"jobSeekerLoginData\",\n                            JSON.stringify({user, login})\n                        );\n                        this.props.navigation.navigate(\n                            \"JobSeekerScreen\",\n                            login\n                        );\n                    } else {\n                        Toast.show({\n                            type: \"error\",\n                            position: \"top\",\n                            text1: \"Warning\",\n                            text2: \"Something went wrong.\",\n                        });\n                    }\n                } else throw new Error(response);\n            })\n            .catch((err) => {\n                Toast.show({\n                    type: \"error\",\n                    position: \"top\",\n                    text1: \"Warning\",\n                    text2: \"Login Failed\",\n                });\n                // console.log(\"in error block\", err);\n                // this.setState({err: \"Login Failed\", success: false});\n            });\n    };\n\n    facebookLogIn = async () => {\n        try {\n            // 1103337533366321\n            const FB_APP_ID = \"320335242291060\";\n            await Facebook.initializeAsync(FB_APP_ID);\n\n            const {\n                type,\n                token,\n                expires,\n                permissions,\n                declinedPermissions,\n            } = await Facebook.logInWithReadPermissionsAsync(FB_APP_ID, {\n                permissions: [\"public_profile\"],\n            });\n\n            console.log({\n                type,\n                token,\n                expires,\n                permissions,\n                declinedPermissions,\n            });\n\n            if (type === \"success\") {\n                // Get the user's name using Facebook's Graph API\n                fetch(\n                    `https://graph.facebook.com/me?access_token=${token}&fields=id,name,email,picture.height(500)`\n                )\n                    .then((response) => response.json())\n                    .then((data) => {\n                        this.setState(\n                            {isLoggedin: true, userFbData: data},\n                            () => {\n                                console.log(this.state.userFbData);\n                                this.props.navigation.navigate(\n                                    \"RegisterScr\",\n                                    this.state.userFbData\n                                );\n                            }\n                        );\n                        // setLoggedinStatus(true);\n                        // setUserData(data);\n                    })\n                    .catch((e) => console.log(e));\n            } else {\n                // type === 'cancel'\n            }\n        } catch ({message}) {\n            alert(`Facebook Login Error: ${message}`);\n        }\n    };\n\n    render() {\n        return (\n            <View style={styles.container}>\n                <Toast ref={(ref) => Toast.setRef(ref)} />\n                <View style={styles.image}>\n                    <Image source={require(\"../../assets/logo.png\")} />\n                </View>\n                <View style={styles.inputView}>\n                    <TextInput\n                        name=\"email\"\n                        type=\"text\"\n                        style={styles.inputText}\n                        placeholder=\"Email\"\n                        placeholderTextColor=\"#dddddd\"\n                        onChangeText={this.handleEmailChange}\n                    />\n                </View>\n                <View style={styles.inputView}>\n                    <TextInput\n                        name=\"password\"\n                        type=\"text\"\n                        secureTextEntry\n                        style={styles.inputText}\n                        placeholder=\"Password\"\n                        placeholderTextColor=\"#dddddd\"\n                        onChangeText={this.handlePasswordChange}\n                    />\n                </View>\n                {/*<Toast\n          visible={!this.state.success}\n          duration={Toast.durations.SHORT}\n          position={Toast.positions.BOTTOM}\n          backgroundColor=\"red\"\n          shadowColor=\"#dddddd\"\n          shadow={true}\n          animation={false}\n          hideOnPress={true}\n          onHidden={() => this.setState({success: true})}\n        >\n          {this.state.err}\n        </Toast>*/}\n                <TouchableOpacity\n                    onPress={() =>\n                        this.props.navigation.navigate(\"ForgatPassword\")\n                    }\n                >\n                    <Text style={styles.forgot}>Forgot Password?</Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity\n                    style={styles.loginBtn}\n                    onPress={this.handleSubmit}\n                >\n                    <Text style={styles.loginText}>LOGIN</Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity\n                    style={styles.signupBtn}\n                    onPress={() =>\n                        this.props.navigation.navigate(\"RegisterScr\", {})\n                    }\n                >\n                    <Text style={styles.signupBtnText}>SIGN UP</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                    style={styles.fbBtn}\n                    onPress={this.facebookLogIn}\n                >\n                    <FontAwesome name=\"facebook\" color=\"#ffffff\" />\n                    <Text style={{color: \"#ffffff\", marginLeft: 10}}>\n                        Signup with Facebook\n                    </Text>\n                </TouchableOpacity>\n            </View>\n        );\n    }\n}\n\nexport default HomeScreen;\n"]},"metadata":{},"sourceType":"module"}