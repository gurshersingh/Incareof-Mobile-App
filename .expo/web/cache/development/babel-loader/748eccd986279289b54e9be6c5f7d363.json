{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\frontend\\\\node_modules\\\\react-native-toast-message\\\\src\\\\index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport SuccessToast from \"./components/success\";\nimport ErrorToast from \"./components/error\";\nimport InfoToast from \"./components/info\";\nimport { complement } from \"./utils/arr\";\nimport { includeKeys } from \"./utils/obj\";\nimport styles from \"./styles\";\nvar FRICTION = 8;\nvar defaultComponentsConfig = {\n  success: function success(_ref) {\n    var hide = _ref.hide,\n        text1 = _ref.text1,\n        text2 = _ref.text2;\n    return React.createElement(SuccessToast, {\n      onClose: hide,\n      text1: text1,\n      text2: text2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 5\n      }\n    });\n  },\n  error: function error(_ref2) {\n    var hide = _ref2.hide,\n        text1 = _ref2.text1,\n        text2 = _ref2.text2;\n    return React.createElement(ErrorToast, {\n      onClose: hide,\n      text1: text1,\n      text2: text2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 5\n      }\n    });\n  },\n  info: function info(_ref3) {\n    var hide = _ref3.hide,\n        text1 = _ref3.text1,\n        text2 = _ref3.text2;\n    return React.createElement(InfoToast, {\n      onClose: hide,\n      text1: text1,\n      text2: text2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 5\n      }\n    });\n  }\n};\n\nvar getInitialState = function getInitialState(props) {\n  var _props$topOffset = props.topOffset,\n      topOffset = _props$topOffset === void 0 ? 30 : _props$topOffset,\n      _props$bottomOffset = props.bottomOffset,\n      bottomOffset = _props$bottomOffset === void 0 ? 40 : _props$bottomOffset,\n      _props$visibilityTime = props.visibilityTime,\n      visibilityTime = _props$visibilityTime === void 0 ? 4000 : _props$visibilityTime,\n      onShow = props.onShow,\n      onHide = props.onHide;\n  return {\n    topOffset: topOffset,\n    bottomOffset: bottomOffset,\n    height: 60,\n    position: 'top',\n    type: 'success',\n    visibilityTime: visibilityTime,\n    autoHide: true,\n    text1: '',\n    text2: '',\n    onShow: onShow,\n    onHide: onHide\n  };\n};\n\nvar Toast = function (_Component) {\n  _inherits(Toast, _Component);\n\n  var _super = _createSuper(Toast);\n\n  _createClass(Toast, null, [{\n    key: \"setRef\",\n    value: function setRef() {\n      var ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this._ref = ref;\n    }\n  }, {\n    key: \"getRef\",\n    value: function getRef() {\n      return this._ref;\n    }\n  }, {\n    key: \"clearRef\",\n    value: function clearRef() {\n      this._ref = null;\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this._ref.show(options);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this._ref.hide();\n    }\n  }]);\n\n  function Toast(props) {\n    var _this;\n\n    _classCallCheck(this, Toast);\n\n    _this = _super.call(this, props);\n    _this._setState = _this._setState.bind(_assertThisInitialized(_this));\n    _this._animateMovement = _this._animateMovement.bind(_assertThisInitialized(_this));\n    _this._animateRelease = _this._animateRelease.bind(_assertThisInitialized(_this));\n    _this.startTimer = _this.startTimer.bind(_assertThisInitialized(_this));\n    _this.animate = _this.animate.bind(_assertThisInitialized(_this));\n    _this.show = _this.show.bind(_assertThisInitialized(_this));\n    _this.hide = _this.hide.bind(_assertThisInitialized(_this));\n    _this.onLayout = _this.onLayout.bind(_assertThisInitialized(_this));\n    _this.state = _objectSpread(_objectSpread({}, getInitialState(props)), {}, {\n      inProgress: false,\n      isVisible: false,\n      animation: new Animated.Value(0)\n    });\n    _this.panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: function onStartShouldSetPanResponder() {\n        return true;\n      },\n      onPanResponderMove: function onPanResponderMove(event, gesture) {\n        _this._animateMovement(gesture);\n      },\n      onPanResponderRelease: function onPanResponderRelease(event, gesture) {\n        _this._animateRelease(gesture);\n      }\n    });\n    return _this;\n  }\n\n  _createClass(Toast, [{\n    key: \"_setState\",\n    value: function _setState(reducer) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        return _this2.setState(reducer, function () {\n          return resolve();\n        });\n      });\n    }\n  }, {\n    key: \"_animateMovement\",\n    value: function _animateMovement(gesture) {\n      var _this$state = this.state,\n          position = _this$state.position,\n          animation = _this$state.animation;\n      var dy = gesture.dy;\n      var value = 1 + dy / 100;\n\n      if (position === 'bottom') {\n        value = 1 - dy / 100;\n      }\n\n      if (value < 1) {\n        animation.setValue(value);\n      }\n    }\n  }, {\n    key: \"_animateRelease\",\n    value: function _animateRelease(gesture) {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          position = _this$state2.position,\n          animation = _this$state2.animation;\n      var dy = gesture.dy,\n          vy = gesture.vy;\n      var value = 1 + dy / 100;\n\n      if (position === 'bottom') {\n        value = 1 - dy / 100;\n      }\n\n      if (value < 0.65) {\n        Animated.spring(animation, {\n          toValue: -2,\n          speed: -vy,\n          useNativeDriver: true\n        }).start(function () {\n          var onHide = _this3.state.onHide;\n\n          if (onHide) {\n            onHide();\n          }\n        });\n      } else if (value < 0.95) {\n        Animated.spring(animation, {\n          toValue: 1,\n          velocity: vy,\n          useNativeDriver: true\n        }).start();\n      }\n    }\n  }, {\n    key: \"show\",\n    value: function show() {\n      var _this4 = this;\n\n      var options,\n          _this$state3,\n          inProgress,\n          isVisible,\n          _this$state4,\n          autoHide,\n          onShow,\n          _args = arguments;\n\n      return _regeneratorRuntime.async(function show$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              options = _args.length > 0 && _args[0] !== undefined ? _args[0] : {};\n              _this$state3 = this.state, inProgress = _this$state3.inProgress, isVisible = _this$state3.isVisible;\n\n              if (!(inProgress || isVisible)) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(this.hide());\n\n            case 5:\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(this._setState(function (prevState) {\n                return _objectSpread(_objectSpread(_objectSpread({}, prevState), getInitialState(_this4.props)), {}, {\n                  inProgress: true\n                }, options);\n              }));\n\n            case 7:\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(this.animateShow());\n\n            case 9:\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(this._setState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  isVisible: true,\n                  inProgress: false\n                });\n              }));\n\n            case 11:\n              this.clearTimer();\n              _this$state4 = this.state, autoHide = _this$state4.autoHide, onShow = _this$state4.onShow;\n\n              if (autoHide) {\n                this.startTimer();\n              }\n\n              if (onShow) {\n                onShow();\n              }\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var onHide;\n      return _regeneratorRuntime.async(function hide$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(this._setState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  inProgress: true\n                });\n              }));\n\n            case 2:\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(this.animateHide());\n\n            case 4:\n              this.clearTimer();\n              _context2.next = 7;\n              return _regeneratorRuntime.awrap(this._setState(function (prevState) {\n                return _objectSpread(_objectSpread({}, prevState), {}, {\n                  isVisible: false,\n                  inProgress: false\n                });\n              }));\n\n            case 7:\n              onHide = this.state.onHide;\n\n              if (onHide) {\n                onHide();\n              }\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"animateShow\",\n    value: function animateShow() {\n      return this.animate({\n        toValue: 1\n      });\n    }\n  }, {\n    key: \"animateHide\",\n    value: function animateHide() {\n      return this.animate({\n        toValue: 0\n      });\n    }\n  }, {\n    key: \"animate\",\n    value: function animate(_ref4) {\n      var toValue = _ref4.toValue;\n      var animation = this.state.animation;\n      return new Promise(function (resolve) {\n        Animated.spring(animation, {\n          toValue: toValue,\n          friction: FRICTION,\n          useNativeDriver: true\n        }).start(function () {\n          return resolve();\n        });\n      });\n    }\n  }, {\n    key: \"startTimer\",\n    value: function startTimer() {\n      var _this5 = this;\n\n      var visibilityTime = this.state.visibilityTime;\n      this.timer = setTimeout(function () {\n        return _this5.hide();\n      }, visibilityTime);\n    }\n  }, {\n    key: \"clearTimer\",\n    value: function clearTimer() {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n  }, {\n    key: \"renderContent\",\n    value: function renderContent(_ref5) {\n      var config = _ref5.config;\n\n      var componentsConfig = _objectSpread(_objectSpread({}, defaultComponentsConfig), config);\n\n      var type = this.state.type;\n      var toastComponent = componentsConfig[type];\n\n      if (!toastComponent) {\n        console.error(\"Type '\" + type + \"' does not exist. Make sure to add it to your 'config'. You can read the documentation here: \");\n        return null;\n      }\n\n      return toastComponent(_objectSpread(_objectSpread({}, includeKeys({\n        obj: this.state,\n        keys: ['position', 'type', 'inProgress', 'isVisible', 'text1', 'text2', 'hide', 'show']\n      })), {}, {\n        hide: this.hide,\n        show: this.show\n      }));\n    }\n  }, {\n    key: \"getBaseStyle\",\n    value: function getBaseStyle() {\n      var position = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'bottom';\n      var _this$state5 = this.state,\n          topOffset = _this$state5.topOffset,\n          bottomOffset = _this$state5.bottomOffset,\n          height = _this$state5.height,\n          animation = _this$state5.animation;\n      var offset = position === 'bottom' ? bottomOffset : topOffset;\n      var range = [height, -offset];\n      var outputRange = position === 'bottom' ? range : complement(range);\n      var translateY = animation.interpolate({\n        inputRange: [0, 1],\n        outputRange: outputRange\n      });\n      return [styles.base, styles[position], {\n        transform: [{\n          translateY: translateY\n        }]\n      }];\n    }\n  }, {\n    key: \"onLayout\",\n    value: function onLayout(e) {\n      this.setState({\n        height: e.nativeEvent.layout.height\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var position = this.state.position;\n      var baseStyle = this.getBaseStyle(position);\n      return React.createElement(Animated.View, _extends({\n        onLayout: this.onLayout,\n        style: baseStyle\n      }, this.panResponder.panHandlers, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 7\n        }\n      }), this.renderContent(this.props));\n    }\n  }]);\n\n  return Toast;\n}(Component);\n\nToast._ref = null;\nexport default Toast;","map":{"version":3,"sources":["D:/frontend/node_modules/react-native-toast-message/src/index.js"],"names":["React","Component","SuccessToast","ErrorToast","InfoToast","complement","includeKeys","styles","FRICTION","defaultComponentsConfig","success","hide","text1","text2","error","info","getInitialState","props","topOffset","bottomOffset","visibilityTime","onShow","onHide","height","position","type","autoHide","Toast","ref","_ref","options","show","_setState","bind","_animateMovement","_animateRelease","startTimer","animate","onLayout","state","inProgress","isVisible","animation","Animated","Value","panResponder","PanResponder","create","onStartShouldSetPanResponder","onPanResponderMove","event","gesture","onPanResponderRelease","reducer","Promise","resolve","setState","dy","value","setValue","vy","spring","toValue","speed","useNativeDriver","start","velocity","prevState","animateShow","clearTimer","animateHide","friction","timer","setTimeout","clearTimeout","config","componentsConfig","toastComponent","console","obj","keys","offset","range","outputRange","translateY","interpolate","inputRange","base","transform","e","nativeEvent","layout","baseStyle","getBaseStyle","panHandlers","renderContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Animated, PanResponder } from 'react-native';\n\nimport SuccessToast from './components/success';\nimport ErrorToast from './components/error';\nimport InfoToast from './components/info';\nimport { complement } from './utils/arr';\nimport { includeKeys } from './utils/obj';\nimport styles from './styles';\n\nconst FRICTION = 8;\n\nconst defaultComponentsConfig = {\n  success: ({ hide, text1, text2 }) => (\n    <SuccessToast onClose={hide} text1={text1} text2={text2} />\n  ),\n  error: ({ hide, text1, text2 }) => (\n    <ErrorToast onClose={hide} text1={text1} text2={text2} />\n  ),\n  info: ({ hide, text1, text2 }) => (\n    <InfoToast onClose={hide} text1={text1} text2={text2} />\n  )\n};\n\nconst getInitialState = (props) => {\n  const {\n    topOffset = 30,\n    bottomOffset = 40,\n    visibilityTime = 4000,\n    onShow,\n    onHide\n  } = props;\n\n  return {\n    // layout\n    topOffset,\n    bottomOffset,\n    height: 60,\n    position: 'top',\n    type: 'success',\n\n    // timing (in ms)\n    visibilityTime,\n    autoHide: true,\n\n    // content\n    text1: '',\n    text2: '',\n\n    onShow,\n    onHide\n  };\n};\n\nclass Toast extends Component {\n  static _ref = null;\n\n  static setRef(ref = {}) {\n    this._ref = ref;\n  }\n\n  static getRef() {\n    return this._ref;\n  }\n\n  static clearRef() {\n    this._ref = null;\n  }\n\n  static show(options = {}) {\n    this._ref.show(options);\n  }\n\n  static hide() {\n    this._ref.hide();\n  }\n\n  constructor(props) {\n    super(props);\n\n    this._setState = this._setState.bind(this);\n    this._animateMovement = this._animateMovement.bind(this);\n    this._animateRelease = this._animateRelease.bind(this);\n    this.startTimer = this.startTimer.bind(this);\n    this.animate = this.animate.bind(this);\n    this.show = this.show.bind(this);\n    this.hide = this.hide.bind(this);\n    this.onLayout = this.onLayout.bind(this);\n\n    this.state = {\n      ...getInitialState(props),\n\n      inProgress: false,\n      isVisible: false,\n      animation: new Animated.Value(0)\n    };\n\n    this.panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onPanResponderMove: (event, gesture) => {\n        this._animateMovement(gesture);\n      },\n      onPanResponderRelease: (event, gesture) => {\n        this._animateRelease(gesture);\n      }\n    });\n  }\n\n  _setState(reducer) {\n    return new Promise((resolve) => this.setState(reducer, () => resolve()));\n  }\n\n  _animateMovement(gesture) {\n    const { position, animation } = this.state;\n    const { dy } = gesture;\n    let value = 1 + dy / 100;\n\n    if (position === 'bottom') {\n      value = 1 - dy / 100;\n    }\n\n    if (value < 1) {\n      animation.setValue(value);\n    }\n  }\n\n  _animateRelease(gesture) {\n    const { position, animation } = this.state;\n    const { dy, vy } = gesture;\n    let value = 1 + dy / 100;\n\n    if (position === 'bottom') {\n      value = 1 - dy / 100;\n    }\n\n    if (value < 0.65) {\n      Animated.spring(animation, {\n        toValue: -2,\n        speed: -vy,\n        useNativeDriver: true\n      }).start(() => {\n        const { onHide } = this.state;\n        if (onHide) {\n          onHide();\n        }\n      });\n    } else if (value < 0.95) {\n      Animated.spring(animation, {\n        toValue: 1,\n        velocity: vy,\n        useNativeDriver: true\n      }).start();\n    }\n  }\n\n  async show(options = {}) {\n    const { inProgress, isVisible } = this.state;\n    if (inProgress || isVisible) {\n      await this.hide();\n    }\n\n    await this._setState((prevState) => ({\n      ...prevState,\n      ...getInitialState(this.props), // Reset layout\n      inProgress: true,\n      ...options\n    }));\n    await this.animateShow();\n    await this._setState((prevState) => ({\n      ...prevState,\n      isVisible: true,\n      inProgress: false\n    }));\n    this.clearTimer();\n\n    const { autoHide, onShow } = this.state;\n\n    if (autoHide) {\n      this.startTimer();\n    }\n\n    if (onShow) {\n      onShow();\n    }\n  }\n\n  async hide() {\n    await this._setState((prevState) => ({\n      ...prevState,\n      inProgress: true\n    }));\n    await this.animateHide();\n    this.clearTimer();\n    await this._setState((prevState) => ({\n      ...prevState,\n      isVisible: false,\n      inProgress: false\n    }));\n\n    const { onHide } = this.state;\n    if (onHide) {\n      onHide();\n    }\n  }\n\n  animateShow() {\n    return this.animate({ toValue: 1 });\n  }\n\n  animateHide() {\n    return this.animate({ toValue: 0 });\n  }\n\n  animate({ toValue }) {\n    const { animation } = this.state;\n    return new Promise((resolve) => {\n      Animated.spring(animation, {\n        toValue,\n        friction: FRICTION,\n        useNativeDriver: true\n      }).start(() => resolve());\n    });\n  }\n\n  startTimer() {\n    const { visibilityTime } = this.state;\n    this.timer = setTimeout(() => this.hide(), visibilityTime);\n  }\n\n  clearTimer() {\n    clearTimeout(this.timer);\n    this.timer = null;\n  }\n\n  renderContent({ config }) {\n    const componentsConfig = {\n      ...defaultComponentsConfig,\n      ...config\n    };\n\n    const { type } = this.state;\n    const toastComponent = componentsConfig[type];\n\n    if (!toastComponent) {\n      console.error(\n        `Type '${type}' does not exist. Make sure to add it to your 'config'. You can read the documentation here: `\n      );\n      return null;\n    }\n\n    return toastComponent({\n      ...includeKeys({\n        obj: this.state,\n        keys: [\n          'position',\n          'type',\n          'inProgress',\n          'isVisible',\n          'text1',\n          'text2',\n          'hide',\n          'show'\n        ]\n      }),\n      hide: this.hide,\n      show: this.show\n    });\n  }\n\n  getBaseStyle(position = 'bottom') {\n    const { topOffset, bottomOffset, height, animation } = this.state;\n    const offset = position === 'bottom' ? bottomOffset : topOffset;\n    const range = [height, -offset];\n    const outputRange = position === 'bottom' ? range : complement(range);\n\n    const translateY = animation.interpolate({\n      inputRange: [0, 1],\n      outputRange\n    });\n\n    return [\n      styles.base,\n      styles[position],\n      {\n        transform: [{ translateY }]\n      }\n    ];\n  }\n\n  onLayout(e) {\n    this.setState({ height: e.nativeEvent.layout.height });\n  }\n\n  render() {\n    const { position } = this.state;\n    const baseStyle = this.getBaseStyle(position);\n\n    return (\n      <Animated.View\n        onLayout={this.onLayout}\n        style={baseStyle}\n        {...this.panResponder.panHandlers}>\n        {this.renderContent(this.props)}\n      </Animated.View>\n    );\n  }\n}\n\nexport default Toast;\n"]},"metadata":{},"sourceType":"module"}