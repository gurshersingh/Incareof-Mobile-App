{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\frontend\\\\src\\\\containers\\\\UploadImage.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport * as React from 'react';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport * as ImagePicker from 'expo-image-picker';\nimport Constants from 'expo-constants';\nimport * as Permissions from 'expo-permissions';\nimport { baseUrl } from \"../utils/constants\";\n\nvar UploadImage = function (_React$Component) {\n  _inherits(UploadImage, _React$Component);\n\n  var _super = _createSuper(UploadImage);\n\n  function UploadImage() {\n    var _this;\n\n    _classCallCheck(this, UploadImage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      image: null\n    };\n\n    _this.getPermissionAsync = function _callee() {\n      var _await$Permissions$as, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!Constants.platform.ios) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n            case 3:\n              _await$Permissions$as = _context.sent;\n              status = _await$Permissions$as.status;\n\n              if (status !== 'granted') {}\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.pickImage = function _callee2() {\n      var result;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.All,\n                allowsEditing: true,\n                aspect: [4, 3],\n                quality: 1\n              }));\n\n            case 3:\n              result = _context2.sent;\n\n              if (!result.cancelled) {\n                _this.setState({\n                  image: result.uri\n                });\n              }\n\n              console.log(result);\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[0, 8]], Promise);\n    };\n\n    _this.takePhoto = function _callee3() {\n      var _await$Permissions$as2, cameraPerm, _await$Permissions$as3, cameraRollPerm, pickerResult;\n\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));\n\n            case 2:\n              _await$Permissions$as2 = _context3.sent;\n              cameraPerm = _await$Permissions$as2.status;\n              _context3.next = 6;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));\n\n            case 6:\n              _await$Permissions$as3 = _context3.sent;\n              cameraRollPerm = _await$Permissions$as3.status;\n\n              if (!(cameraPerm === 'granted' && cameraRollPerm === 'granted')) {\n                _context3.next = 14;\n                break;\n              }\n\n              _context3.next = 11;\n              return _regeneratorRuntime.awrap(ImagePicker.launchCameraAsync({\n                allowsEditing: true,\n                aspect: [4, 3]\n              }));\n\n            case 11:\n              pickerResult = _context3.sent;\n\n              if (!pickerResult.cancelled) {\n                _this.setState({\n                  image: pickerResult.uri\n                });\n              }\n\n              _this.uploadImageAsync(pickerResult.uri);\n\n            case 14:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.handleSubmit = function () {\n      var that = _assertThisInitialized(_this);\n\n      fetch(baseUrl + 'api/employer/add-image', {\n        method: 'POST',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify({\n          image: _this.state.image,\n          user_id: _this.props.navigation.getParam('user_id')\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        console.log('here------', response);\n        if (!response.success) throw new Error(response);else {\n          console.log('here------', _this.props.navigation.getParam('user_id'));\n          that.props.navigation.navigate('MembershipPage', {\n            service_list: _this.props.navigation.getParam('service_list'),\n            user_id: _this.props.navigation.getParam('user_id')\n          });\n        }\n      }).catch(function (err) {\n        _this.setState({\n          success: false,\n          err: err,\n          isLoading: false\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(UploadImage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getPermissionAsync();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var image = this.state.image;\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 1\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        style: styles.title1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }\n      }, \"Upload Photo\")), image && React.createElement(Image, {\n        source: {\n          uri: image\n        },\n        style: {\n          width: 200,\n          height: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 19\n        }\n      }), React.createElement(View, {\n        style: styles.loginBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 1\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: this.pickImage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 12\n        }\n      }, React.createElement(Text, {\n        style: styles.loginText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }\n      }, \" Pick an image from camera roll \"))), React.createElement(View, {\n        style: styles.loginBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 1\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: this.takePhoto,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 12\n        }\n      }, React.createElement(Text, {\n        style: styles.loginText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, \" Click an image from camera \"))), React.createElement(View, {\n        style: styles.loginBtnnext,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 1\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: styles.loginText1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      }, \"Next\")))));\n    }\n  }]);\n\n  return UploadImage;\n}(React.Component);\n\nexport { UploadImage as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#ffffff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  text: {\n    fontSize: 30\n  },\n  loginBtn: {\n    width: '70%',\n    backgroundColor: '#8fbc8f',\n    borderRadius: 25,\n    height: 50,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: 10,\n    marginBottom: 10\n  },\n  loginText: {\n    color: 'black'\n  },\n  loginText1: {\n    color: 'black',\n    fontSize: 20\n  },\n  title1: {\n    color: 'black',\n    fontSize: 30,\n    marginTop: 20,\n    marginLeft: 65\n  },\n  loginBtnnext: {\n    width: '40%',\n    backgroundColor: '#fb5b5a',\n    borderRadius: 25,\n    height: 50,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginTop: 150,\n    marginLeft: 285\n  }\n});","map":{"version":3,"sources":["D:/frontend/src/containers/UploadImage.js"],"names":["React","ImagePicker","Constants","Permissions","baseUrl","UploadImage","state","image","getPermissionAsync","platform","ios","askAsync","CAMERA_ROLL","status","pickImage","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","result","cancelled","setState","uri","console","log","takePhoto","CAMERA","cameraPerm","cameraRollPerm","launchCameraAsync","pickerResult","uploadImageAsync","handleSubmit","that","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","body","JSON","stringify","user_id","props","navigation","getParam","then","response","json","success","Error","navigate","service_list","catch","err","isLoading","styles","container","flex","alignItems","justifyContent","title1","width","height","loginBtn","loginText","loginBtnnext","loginText1","Component","StyleSheet","create","backgroundColor","text","fontSize","borderRadius","marginTop","marginBottom","color","marginLeft"],"mappings":";;;;;;;;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;;;;;;AAIA,OAAO,KAAKC,WAAZ,MAA6B,mBAA7B;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,OAAO,KAAKC,WAAZ,MAA6B,kBAA7B;AACA,SAASC,OAAT;;IAEqBC,W;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACNC,MAAAA,KAAK,EAAE;AADD,K;;UAQRC,kB,GAAqB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,mBACfN,SAAS,CAACO,QAAV,CAAmBC,GADJ;AAAA;AAAA;AAAA;;AAAA;AAAA,+CAEQP,WAAW,CAACQ,QAAZ,CAAqBR,WAAW,CAACS,WAAjC,CAFR;;AAAA;AAAA;AAETC,cAAAA,MAFS,yBAETA,MAFS;;AAGjB,kBAAIA,MAAM,KAAK,SAAf,EAA0B,CAEzB;;AALgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;UAQrBC,S,GAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAEab,WAAW,CAACc,uBAAZ,CAAoC;AACvDC,gBAAAA,UAAU,EAAEf,WAAW,CAACgB,gBAAZ,CAA6BC,GADc;AAEvDC,gBAAAA,aAAa,EAAE,IAFwC;AAGvDC,gBAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAH+C;AAIvDC,gBAAAA,OAAO,EAAE;AAJ8C,eAApC,CAFb;;AAAA;AAEFC,cAAAA,MAFE;;AAQR,kBAAI,CAACA,MAAM,CAACC,SAAZ,EAAuB;AACrB,sBAAKC,QAAL,CAAc;AAAEjB,kBAAAA,KAAK,EAAEe,MAAM,CAACG;AAAhB,iBAAd;AACD;;AAEDC,cAAAA,OAAO,CAACC,GAAR,CAAYL,MAAZ;AAZQ;AAAA;;AAAA;AAAA;AAAA;AAcRI,cAAAA,OAAO,CAACC,GAAR;;AAdQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;UAiBZC,S,GAAY;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+CAGAzB,WAAW,CAACQ,QAAZ,CAAqBR,WAAW,CAAC0B,MAAjC,CAHA;;AAAA;AAAA;AAEAC,cAAAA,UAFA,0BAERjB,MAFQ;AAAA;AAAA,+CAOAV,WAAW,CAACQ,QAAZ,CAAqBR,WAAW,CAACS,WAAjC,CAPA;;AAAA;AAAA;AAMAmB,cAAAA,cANA,0BAMRlB,MANQ;;AAAA,oBAUNiB,UAAU,KAAK,SAAf,IAA4BC,cAAc,KAAK,SAVzC;AAAA;AAAA;AAAA;;AAAA;AAAA,+CAWmB9B,WAAW,CAAC+B,iBAAZ,CAA8B;AACvDb,gBAAAA,aAAa,EAAE,IADwC;AAEvDC,gBAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ;AAF+C,eAA9B,CAXnB;;AAAA;AAWFa,cAAAA,YAXE;;AAgBR,kBAAI,CAACA,YAAY,CAACV,SAAlB,EAA6B;AAC3B,sBAAKC,QAAL,CAAc;AAAEjB,kBAAAA,KAAK,EAAE0B,YAAY,CAACR;AAAtB,iBAAd;AACD;;AAED,oBAAKS,gBAAL,CAAsBD,YAAY,CAACR,GAAnC;;AApBQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;UAuBZU,Y,GAAgB,YAAM;AAClB,UAAMC,IAAI,gCAAV;;AACAC,MAAAA,KAAK,CAACjC,OAAO,GAAC,wBAAT,EAAkC;AACrCkC,QAAAA,MAAM,EAAC,MAD8B;AAErCC,QAAAA,IAAI,EAAE,MAF+B;AAGrCC,QAAAA,KAAK,EAAE,UAH8B;AAIrCC,QAAAA,WAAW,EAAE,aAJwB;AAKrCC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAL4B;AASrCC,QAAAA,QAAQ,EAAE,QAT2B;AAUrCC,QAAAA,cAAc,EAAE,aAVqB;AAWrCC,QAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AAACxC,UAAAA,KAAK,EAAC,MAAKD,KAAL,CAAWC,KAAlB;AAAyByC,UAAAA,OAAO,EAAC,MAAKC,KAAL,CAAWC,UAAX,CAAsBC,QAAtB,CAA+B,SAA/B;AAAjC,SAAf;AAXgC,OAAlC,CAAL,CAaCC,IAbD,CAaM,UAAAC,QAAQ;AAAA,eAAIA,QAAQ,CAACC,IAAT,EAAJ;AAAA,OAbd,EAcDF,IAdC,CAcI,UAACC,QAAD,EAAY;AACd3B,QAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0B0B,QAA1B;AACF,YAAG,CAACA,QAAQ,CAACE,OAAb,EACE,MAAM,IAAIC,KAAJ,CAAUH,QAAV,CAAN,CADF,KAEI;AACA3B,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyB,MAAKsB,KAAL,CAAWC,UAAX,CAAsBC,QAAtB,CAA+B,SAA/B,CAAzB;AACAf,UAAAA,IAAI,CAACa,KAAL,CAAWC,UAAX,CAAsBO,QAAtB,CAA+B,gBAA/B,EAAiD;AAACC,YAAAA,YAAY,EAAC,MAAKT,KAAL,CAAWC,UAAX,CAAsBC,QAAtB,CAA+B,cAA/B,CAAd;AAA6DH,YAAAA,OAAO,EAAC,MAAKC,KAAL,CAAWC,UAAX,CAAsBC,QAAtB,CAA+B,SAA/B;AAArE,WAAjD;AACD;AACJ,OAtBC,EAuBDQ,KAvBC,CAuBK,UAACC,GAAD,EAAO;AACV,cAAKpC,QAAL,CAAc;AAAC+B,UAAAA,OAAO,EAAC,KAAT;AAAeK,UAAAA,GAAG,EAACA,GAAnB;AAAwBC,UAAAA,SAAS,EAAC;AAAlC,SAAd;AAEH,OA1BC;AA2BH,K;;;;;;;wCAjFmB;AAClB,WAAKrD,kBAAL;AACD;;;6BAiFQ;AAAA,UACCD,KADD,GACW,KAAKD,KADhB,CACCC,KADD;AAGP,aACJ,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEuD,MAAM,CAACC,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACU,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE;AAAEC,UAAAA,IAAI,EAAE,CAAR;AAAWC,UAAAA,UAAU,EAAE,QAAvB;AAAiCC,UAAAA,cAAc,EAAE;AAAjD,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEJ,MAAM,CAACK,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,CADA,EAKD5D,KAAK,IAAI,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE;AAAEkB,UAAAA,GAAG,EAAElB;AAAP,SAAf;AAA+B,QAAA,KAAK,EAAE;AAAE6D,UAAAA,KAAK,EAAE,GAAT;AAAcC,UAAAA,MAAM,EAAE;AAAtB,SAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALR,EAOV,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEP,MAAM,CAACQ,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACW,oBAAC,gBAAD;AAAkB,QAAA,OAAO,EAAE,KAAKxD,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEgD,MAAM,CAACS,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CADD,CADX,CAPU,EAYV,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAET,MAAM,CAACQ,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACW,oBAAC,gBAAD;AAAkB,QAAA,OAAO,EAAE,KAAK1C,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEkC,MAAM,CAACS,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADD,CADX,CAZU,EAiBV,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAET,MAAM,CAACU,YAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACY,oBAAC,gBAAD;AAAkB,QAAA,OAAO,EAAE,KAAKrC,YAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE2B,MAAM,CAACW,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,CADZ,CAjBU,CADV,CADI;AA8BD;;;;EAzHsCzE,KAAK,CAAC0E,S;;SAA1BrE,W;AA4HrB,IAAMyD,MAAM,GAAGa,UAAU,CAACC,MAAX,CAAkB;AAC/Bb,EAAAA,SAAS,EAAE;AACTC,IAAAA,IAAI,EAAE,CADG;AAETa,IAAAA,eAAe,EAAE,SAFR;AAGTZ,IAAAA,UAAU,EAAE,QAHH;AAITC,IAAAA,cAAc,EAAE;AAJP,GADoB;AAQ/BY,EAAAA,IAAI,EAAE;AACJC,IAAAA,QAAQ,EAAE;AADN,GARyB;AAY/BT,EAAAA,QAAQ,EAAE;AACRF,IAAAA,KAAK,EAAE,KADC;AAERS,IAAAA,eAAe,EAAE,SAFT;AAGRG,IAAAA,YAAY,EAAE,EAHN;AAIRX,IAAAA,MAAM,EAAE,EAJA;AAKRJ,IAAAA,UAAU,EAAE,QALJ;AAMRC,IAAAA,cAAc,EAAE,QANR;AAORe,IAAAA,SAAS,EAAE,EAPH;AAQRC,IAAAA,YAAY,EAAE;AARN,GAZqB;AAsB/BX,EAAAA,SAAS,EAAE;AACTY,IAAAA,KAAK,EAAE;AADE,GAtBoB;AAyB/BV,EAAAA,UAAU,EAAE;AACXU,IAAAA,KAAK,EAAE,OADI;AAEVJ,IAAAA,QAAQ,EAAE;AAFA,GAzBmB;AA6B/BZ,EAAAA,MAAM,EAAE;AACRgB,IAAAA,KAAK,EAAE,OADC;AAERJ,IAAAA,QAAQ,EAAE,EAFF;AAGRE,IAAAA,SAAS,EAAE,EAHH;AAKRG,IAAAA,UAAU,EAAE;AALJ,GA7BuB;AAoC/BZ,EAAAA,YAAY,EAAE;AACZJ,IAAAA,KAAK,EAAE,KADK;AAEZS,IAAAA,eAAe,EAAE,SAFL;AAGZG,IAAAA,YAAY,EAAE,EAHF;AAIZX,IAAAA,MAAM,EAAE,EAJI;AAKZJ,IAAAA,UAAU,EAAE,QALA;AAMZC,IAAAA,cAAc,EAAE,QANJ;AAOZe,IAAAA,SAAS,EAAE,GAPC;AASZG,IAAAA,UAAU,EAAE;AATA;AApCiB,CAAlB,CAAf","sourcesContent":["import * as React from 'react';\r\nimport { Image, View\r\n  , Text, StyleSheet, TouchableOpacity\r\n} from 'react-native';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport Constants from 'expo-constants';\r\nimport * as Permissions from 'expo-permissions';\r\nimport { baseUrl } from '../utils/constants';\r\n\r\nexport default class UploadImage extends React.Component {\r\n  state = {\r\n    image: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getPermissionAsync();\r\n  }\r\n\r\n  getPermissionAsync = async () => {\r\n    if (Constants.platform.ios) {\r\n      const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\r\n      if (status !== 'granted') {\r\n        //alert('Sorry, we need camera roll permissions to make this work!');\r\n      }\r\n    }\r\n  };\r\n  pickImage = async () => {\r\n    try {\r\n      const result = await ImagePicker.launchImageLibraryAsync({\r\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n        allowsEditing: true,\r\n        aspect: [4, 3],\r\n        quality: 1,\r\n      });\r\n      if (!result.cancelled) {\r\n        this.setState({ image: result.uri });\r\n      }\r\n\r\n      console.log(result);\r\n    } catch (E) {\r\n      console.log(E);\r\n    }\r\n  };\r\n  takePhoto = async () => {\r\n    const {\r\n      status: cameraPerm\r\n    } = await Permissions.askAsync(Permissions.CAMERA);\r\n\r\n    const {\r\n      status: cameraRollPerm\r\n    } = await Permissions.askAsync(Permissions.CAMERA_ROLL);\r\n\r\n    // only if user allows permission to camera AND camera roll\r\n    if (cameraPerm === 'granted' && cameraRollPerm === 'granted') {\r\n      const pickerResult = await ImagePicker.launchCameraAsync({\r\n        allowsEditing: true,\r\n        aspect: [4, 3],\r\n      });\r\n\r\n      if (!pickerResult.cancelled) {\r\n        this.setState({ image: pickerResult.uri });\r\n      }\r\n\r\n      this.uploadImageAsync(pickerResult.uri);\r\n    }\r\n  };\r\n  handleSubmit =  () => {\r\n      const that = this\r\n      fetch(baseUrl+'api/employer/add-image',{\r\n        method:'POST',\r\n        mode: 'cors', // no-cors, *cors, same-origin\r\n        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\r\n        credentials: 'same-origin', // include, *same-origin, omit\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n          // 'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n        redirect: 'follow', // manual, *follow, error\r\n        referrerPolicy: 'no-referrer',\r\n        body:JSON.stringify({image:this.state.image, user_id:this.props.navigation.getParam('user_id')})\r\n      })\r\n      .then(response => response.json())\r\n    .then((response)=>{\r\n        console.log('here------', response)\r\n      if(!response.success)\r\n        throw new Error(response)\r\n      else{\r\n          console.log('here------',this.props.navigation.getParam('user_id'))\r\n          that.props.navigation.navigate('MembershipPage', {service_list:this.props.navigation.getParam('service_list'),user_id:this.props.navigation.getParam('user_id')})\r\n        }\r\n    })\r\n    .catch((err)=>{\r\n        this.setState({success:false,err:err, isLoading:false\r\n        })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { image } = this.state;\r\n\r\n    return (\r\n<View style={styles.container}>\r\n          <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\r\n          <View >\r\n            <Text style={styles.title1}>Upload Photo</Text>\r\n          </View>\r\n\r\n        {image && <Image source={{ uri: image }} style={{ width: 200, height: 200 }} />}\r\n\r\n<View style={styles.loginBtn}>\r\n           <TouchableOpacity onPress={this.pickImage}>\r\n            <Text style={styles.loginText}> Pick an image from camera roll </Text>\r\n          </TouchableOpacity>\r\n          </View>\r\n<View style={styles.loginBtn}>\r\n           <TouchableOpacity onPress={this.takePhoto}>\r\n            <Text style={styles.loginText}> Click an image from camera </Text>\r\n          </TouchableOpacity>\r\n          </View>\r\n<View style={styles.loginBtnnext}>\r\n            <TouchableOpacity onPress={this.handleSubmit}>\r\n            <Text style={styles.loginText1} >Next</Text>\r\n          </TouchableOpacity>\r\n          </View>\r\n\r\n\r\n    </View>\r\n\t</View>\r\n\r\n    );\r\n  }\r\n  }\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#ffffff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n\r\n  text: {\r\n    fontSize: 30\r\n  },\r\n\r\n  loginBtn: {\r\n    width: '70%',\r\n    backgroundColor: '#8fbc8f',\r\n    borderRadius: 25,\r\n    height: 50,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    marginTop: 10,\r\n    marginBottom: 10,\r\n  },\r\n  loginText: {\r\n    color: 'black',\r\n  },\r\n  loginText1: {\r\n   color: 'black',\r\n    fontSize: 20\r\n  },\r\n  title1: {\r\n  color: 'black',\r\n  fontSize: 30,\r\n  marginTop: 20,\r\n  //marginBottom: 100,\r\n  marginLeft: 65,\r\n},\r\n  loginBtnnext: {\r\n    width: '40%',\r\n    backgroundColor: '#fb5b5a',\r\n    borderRadius: 25,\r\n    height: 50,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    marginTop: 150,\r\n    //marginBottom: 100,\r\n    marginLeft: 285,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}